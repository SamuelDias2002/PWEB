<html lang="en" xmlns="http://www.w3.org/1999/xhtml"><head>
  <meta charset="utf-8">
  <title>Javascript - Exercício 5</title>
  <meta charset="utf-8">
  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<style>
#divbox {
  width:200px;
  height:200px;
  background-color:blue;
  display:none;
}
#divgame {
  width:800px;
  height:500px;
  border:2px black solid;
  margin:auto;
}
</style>
</head>
<body onload="makebox()">

<h1>Jogo - Tempo de reação</h1>

 <h2>Record: <span id="recordTime"><span></span></span></h2>
 <p>Tempo de reação: <span id="reactionTime"><span></span></span></p>
 <div id="divgame">
 <div id="divbox" onclick="divClick()"></div>
 </div>

<script type="text/javascript">
  var clickedTime, createdTime, reactionTime, record=99999;

  function makebox(){
    randomshape();
    var random = getRandomArbitrary(3000, 7000);
    setTimeout(apareceFiguraNaTela, random);
  }

  function randomshape(){
    var color = ["red", "blue", "green", "yellow"];
    var codColor;
    codColor=Math.random();
    codColor=codColor*4;
    codColor= Math.floor(codColor);
    document.getElementById("divbox").style.backgroundColor=color[codColor];

    var randomBorderRadius;
    randomBorderRadius= getRandomArbitrary(0, 150);
    randomBorderRadius= Math.floor(randomBorderRadius);
    document.getElementById("divbox").style.borderRadius = randomBorderRadius+"px";

    var RandommarginLeft, RandommarginTop;
    RandommarginLeft= getRandomArbitrary(0, 600);
    RandommarginLeft= Math.floor(RandommarginLeft);
    RandommarginTop= getRandomArbitrary(0, 300);
    RandommarginTop= Math.floor(RandommarginTop);

    document.getElementById("divbox").style.marginTop = RandommarginTop+"px";
    document.getElementById("divbox").style.marginLeft = RandommarginLeft+"px";
  }

  function apareceFiguraNaTela(){
    document.getElementById("divbox").style.display = 'block';
    createdTime = new Date();
  }

  function divClick(){
    clickedTime = new Date();
    reactionTime = (clickedTime - createdTime) /1000;
    document.getElementById("reactionTime").innerHTML = reactionTime+"ms";
    document.getElementById("divbox").style.display = 'none';

    if(reactionTime < record){
      record = reactionTime;
      document.getElementById("recordTime").innerHTML = record+"ms !!!";
    }  
    makebox();
  }

  function getRandomArbitrary(min, max) {
    return Math.random() * (max - min) + min;
  }
</script>

</body></html>